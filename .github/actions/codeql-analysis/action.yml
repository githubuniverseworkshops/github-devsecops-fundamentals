name: Run CodeQL Analysis
description: Analysis source code for issues and vulnerabilities with CodeQL
inputs:
  languages:
    description: The programming languages used in the source code, that should be analyzed
    required: true
    default: python
  token:
    description: GitHub token to use for authenticating with this instance of GitHub. To download custom packs from multiple registries, use the registries input.
    required: true
    default: ${{ github.token }}
outputs:
  codeql-path:
    description: The path of the CodeQL binary used for analysis
    value: ${{ steps.init-codeql.outputs.codeql-path }}
runs:
  using: "composite"
  steps:
    # Set the `CODEQL-PYTHON` environment variable to the Python executable
    # that includes the dependencies
    - name: Set the `CODEQL-PYTHON` environment variable
      run: echo "CODEQL_PYTHON=$(which python)" >> $GITHUB_ENV
      shell: bash
    - id: init-codeql
      name: Initialize CodeQL
      uses: github/codeql-action/init@v2
      with:
        token: ${{ inputs.token }}
        languages: ${{ inputs.languages }}
        setup-python-dependencies: false
    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v2
